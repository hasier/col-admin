{% extends "admin/change_list.html" %}
{% load i18n static admin_list admin_urls material membership %}

{% block content %}
  <div id="content-main" class="list-content">
    {% block object-tools %}
      {{ block.super }}
    {% endblock %}
    {% if cl.formset.errors %}
        <p class="errornote">
        {% if cl.formset.total_error_count == 1 %}{% trans "Please correct the error below." %}{% else %}{% trans "Please correct the errors below." %}{% endif %}
        </p>
        {{ cl.formset.non_form_errors }}
    {% endif %}
    <div class="module{% if cl.has_filters %} filtered{% endif %}" id="changelist">

      {% block date_hierarchy %}{{ block.super }}{% endblock %}

      <form id="changelist-form" method="post"{% if cl.formset.is_multipart %} enctype="multipart/form-data"{% endif %} novalidate>{% csrf_token %}
      {% if cl.formset %}
        <div>{{ cl.formset.management_form }}</div>
      {% endif %}

      {% block result_list %}
        {{ block.super }}
      {% endblock %}
      {% block pagination %}{{ block.super }}{% endblock %}
      </form>
    </div>
    <div class="side-wrapper">
      <div class="card">
        {% if action_form and actions_on_top and cl.show_admin_actions %}{% admin_actions %}{% endif %}
      </div>
      <div class="card">  {# CUSTOM tag #}
        {% is_membership_setup_initialized as is_membership_setup_initialized %}  {# CUSTOM var #}
        {% if is_membership_setup_initialized %}
            <div class="card-content" style="margin: auto 5px">
                <input type="text" class="datepicker" style="padding: 8px 6px;" id="vote_eligible" name="vote_eligible" placeholder="Date" />
                <button class="default waves-effect waves-light btn" style="margin: 10px auto;" onclick="location.href='{% url 'admin:membership_participant_changelist' %}?vote_eligible=' + document.getElementById('vote_eligible').value;">
                    Get voting members for date
                </button>
            </div>
        {% endif %}
      </div>
      <div class="card">
        {% block search %}{{ block.super }}{% endblock %}
      </div>
      <div class="card">
        {% block filters %}
          {{ block.super }}
        {% endblock %}
      </div>
    </div>
  </div>
{% endblock %}

{% block footer %}
{{ block.super }}
<script type="text/javascript"> {# CUSTOM script #}
  $(document).ready(function(){
    $('.datepicker').datepicker({format: "dd/mm/yyyy"});
  });
</script>
{% endblock %}